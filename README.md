# ğŸ› ï¸ STM32 ê°œë°œ í™˜ê²½ êµ¬ì¶• ë° Renode ê°œìš”
## 1. Renodeë€ ë¬´ì—‡ì¸ê°€?
### RenodeëŠ” ì‹¤ì œ ë¬¼ë¦¬ì ì¸ í•˜ë“œì›¨ì–´ ì—†ì´ ì„ë² ë””ë“œ ì‹œìŠ¤í…œì„ ê°œë°œí•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì—ë®¬ë ˆì´í„° í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

- ì£¼ìš” ê¸°ëŠ¥: 
í”„ë¡œì„¸ì„œ(CPU), ì£¼ë³€ì¥ì¹˜(UART, GPIO, íƒ€ì´ë¨¸ ë“±), ì„¼ì„œ, ìœ ì„  ë„¤íŠ¸ì›Œí¬ ë“±ì„ ì†Œí”„íŠ¸ì›¨ì–´ì ìœ¼ë¡œ ëª¨ë°©í•©ë‹ˆë‹¤.

- ì‚¬ìš© ëª©ì :
  - STM32ì™€ ê°™ì€ ARM Cortex-M ê³„ì—´ ì¹©ì„ ìœ„í•œ íŒì›¨ì–´ë¥¼ PC ìƒì—ì„œ ë°”ë¡œ ì‹¤í–‰í•˜ê³  ë””ë²„ê¹…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - í•˜ë“œì›¨ì–´ê°€ ì¤€ë¹„ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œë„ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

  - CI/CD(ì§€ì†ì  í†µí•©) íŒŒì´í”„ë¼ì¸ì—ì„œ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 2. ê°œë°œ í™˜ê²½ êµ¬ì¶• (Windows + MSYS)
libopencm3 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¹Œë“œí•˜ê³  Renodeì—ì„œ ì‹¤í–‰í•  íŒì›¨ì–´ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ íˆ´ì²´ì¸ê³¼ í™˜ê²½ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

### âœ… ì„¤ì¹˜í•œ ë„êµ¬ (Prerequisites)
1. MSYS (1.0): Windowsì—ì„œ GNU ë¹Œë“œ í™˜ê²½(make, bash ë“±)ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì…¸.

2. ARM GNU Toolchain: ARM Cortex-M(Bare-metal)ìš© í¬ë¡œìŠ¤ ì»´íŒŒì¼ëŸ¬ (arm-none-eabi-gcc).

3. Python: ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ìš©.

4. Git: ì†ŒìŠ¤ ì½”ë“œ ë²„ì „ ê´€ë¦¬ ë° ë‹¤ìš´ë¡œë“œìš©.

### 3. MSYS ì…¸ í™˜ê²½ ë³€ìˆ˜(PATH) ì„¤ì •
MSYS ì…¸ì´ Windowsì— ì„¤ì¹˜ëœ ë„êµ¬ë“¤(Python, GCC, Git)ì„ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ PATHë¥¼ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

#### ğŸš© PATH ì„¤ì • ëª…ë ¹ì–´
Windows ê²½ë¡œë¥¼ MSYS í¬ë§·(POSIX ìŠ¤íƒ€ì¼)ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ export í•©ë‹ˆë‹¤.
```
# Git(cmd), Python, ARM Toolchain ê²½ë¡œ ë“±ë¡
export PATH="/c/Program Files/Git/cmd:/c/Users/woojin/AppData/Local/Programs/Python/Python314:/c/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/14.3 rel1/bin:/usr/local/bin:/usr/bin:/bin"
```
#### ğŸ” ì„¤ì • í™•ì¸
ì„¤ì •ì´ ì œëŒ€ë¡œ ë˜ì—ˆëŠ”ì§€ ê° ë„êµ¬ì˜ ë²„ì „ì„ í™•ì¸í•©ë‹ˆë‹¤.

```
echo $PATH                 # ê²½ë¡œ í™•ì¸
arm-none-eabi-gcc --version # ì»´íŒŒì¼ëŸ¬ í™•ì¸
git --version              # Git í™•ì¸
```

### 4. ë¼ì´ë¸ŒëŸ¬ë¦¬(libopencm3) ë¹Œë“œ ê³¼ì •
STM32 ê°œë°œì„ ìœ„í•œ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ libopencm3ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ë¹Œë“œí–ˆìŠµë‹ˆë‹¤.

#### 1) ì†ŒìŠ¤ ì½”ë“œ ë‹¤ìš´ë¡œë“œ (Git Clone)
```
# í™ˆ ë””ë ‰í„°ë¦¬ë¡œ ì´ë™ í›„ í´ë¡ 
cd ~
git clone https://github.com/libopencm3/libopencm3.git
```

#### 2) Python ëª…ë ¹ì–´ í˜¸í™˜ì„± í•´ê²°
libopencm3ì˜ Makefileì€ python3ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì°¾ëŠ”ë°, WindowsëŠ” python.exeë¡œ ë˜ì–´ ìˆì–´ ì´ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ì‘ì—…ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

```
# Python ì„¤ì¹˜ í´ë”ë¡œ ì´ë™ (ê²½ë¡œëŠ” ì‚¬ìš©ì í™˜ê²½ì— ë§ê²Œ)
cd "/c/Users/woojin/AppData/Local/Programs/Python/Python314"

# ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„± (python.exe -> python3.exe)
ln -s python.exe python3.exe
```

#### 3) ìµœì¢… ë¹Œë“œ (Make)
ë‹¤ì‹œ ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë”ë¡œ ëŒì•„ì™€ ë¹Œë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```
cd ~/libopencm3
make
ê²°ê³¼: ë¹Œë“œê°€ ì™„ë£Œë˜ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼(.a)ì´ ìƒì„±ë˜ë©°, ì´ì œ íŒì›¨ì–´ ì˜ˆì œ ì½”ë“œë¥¼ ì»´íŒŒì¼í•  ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
```

# ì°¸ê³  ë¬¸í—Œ
#### 1) https://interrupt.memfault.com/blog/intro-to-renode#fn:1
#### 2) https://github.com/libopencm3/libopencm3
#### 3) https://github.com/libopencm3/libopencm3-examples
